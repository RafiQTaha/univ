(self.webpackChunk=self.webpackChunk||[]).push([[289],{9611:(e,n,t)=>{var a=t(9755);function r(e,n,t,a,r,s,i){try{var o=e[s](i),c=o.value}catch(e){return void t(e)}o.done?n(c):Promise.resolve(c).then(a,r)}function s(e){return function(){var n=this,t=arguments;return new Promise((function(a,s){var i=e.apply(n,t);function o(e){r(i,a,s,o,c,"next",e)}function c(e){r(i,a,s,o,c,"throw",e)}o(void 0)}))}}t(3076),t(9554),t(1539),t(9826),t(4916),t(4765),t(2772),t(561),t(4553),t(1249),t(2222),t(2564),t(8674);var i=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}),o=!1,c=[],l=[];a(document).ready((function(){var e=a("#datatables_gestion_inscription").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/inscription/gestion/list",processing:!0,serverSide:!0,deferRender:!0,responsive:!0,scrollX:!0,drawCallback:function(){c.forEach((function(e){a("body tr#"+e).find("input").prop("checked",!0)})),a("body tr#"+o).addClass("active_databales")},preDrawCallback:function(e){a.fn.DataTable.isDataTable("#datatables_gestion_inscription")&&((e=a("#datatables_gestion_inscription").DataTable().settings())[0].jqXHR&&e[0].jqXHR.abort())},language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"}}),n=function(){var e=s(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a("#statut-modal i"),e.prev=1,n.removeClass("fa-check").addClass("fa-spinner fa-spin"),e.next=5,axios.get("/inscription/gestion/getstatut/"+o);case 5:return t=e.sent,e.next=8,t.data;case 8:r=e.sent,a("#statut_inscription").html(r).select2(),e.next=17;break;case 12:e.prev=12,e.t0=e.catch(1),e.t0.response.data,console.log(e.t0,e.t0.response),i.fire({icon:"error",title:"Some Error"});case 17:n.addClass("fa-check").removeClass("fa-spinner fa-spin");case 18:case"end":return e.stop()}}),e,null,[[1,12]])})));return function(){return e.apply(this,arguments)}}();a("#frais").on("change",(function(){a("#montant").val(a("#frais").find(":selected").data("frais"))}));var t=function(){var e=s(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/api/organisme");case 3:return n=e.sent,e.next=6,n.data;case 6:t=e.sent,a("#organisme").html(t).select2(),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),e.t0.response.data,console.log(e.t0,e.t0.response),i.fire({icon:"error",title:"Some Error"});case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();t(),a("#etablissement").select2(),a("#etablissement").on("change",s(regeneratorRuntime.mark((function n(){var t,r,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a(this).val(),e.columns().search(""),e.columns(0).search(t).draw(),r="",""==t){n.next=11;break}return n.next=7,axios.get("/api/formation/"+t);case 7:s=n.sent,r=s.data,n.next=13;break;case 11:a("#annee").html("").select2(),a("#promotion").html("").select2();case 13:a("#formation").html(r).select2();case 14:case"end":return n.stop()}}),n,this)})))),a("#formation").on("change",s(regeneratorRuntime.mark((function n(){var t,r,s,i,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=a(this).val(),e.columns().search(""),r="",s="",""==t){n.next=16;break}return e.columns(1).search(t).draw(),n.next=8,axios.get("/api/promotion/"+t);case 8:return i=n.sent,s=i.data,n.next=12,axios.get("/api/annee/"+t);case 12:o=n.sent,r=o.data,n.next=17;break;case 16:e.columns(0).search(a("#etablissement").val()).draw();case 17:a("#annee").html(r).select2(),a("#promotion").html(s).select2();case 19:case"end":return n.stop()}}),n,this)})))),a("#promotion").on("change",s(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.columns().search(""),""!=a(this).val()?(""!=a("#annee").val()&&e.columns(3).search(a("#annee").val()),e.columns(2).search(a(this).val()).draw()):e.columns(1).search(a("#formation").val()).draw();case 2:case"end":return n.stop()}}),n,this)})))),a("#annee").on("change",s(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.columns().search(""),""!=a(this).val()&&e.columns(3).search(a(this).val()),e.columns(2).search(a("#promotion").val()).draw();case 3:case"end":return n.stop()}}),n,this)})))),a("body").on("click","#datatables_gestion_inscription tbody tr",(function(){var e=a(this).find("input");if(e.is(":checked")){e.prop("checked",!1);var n=c.indexOf(e.attr("id"));c.splice(n,1)}else e.prop("checked",!0),c.push(e.attr("id"))})),a("body").on("dblclick","#datatables_gestion_inscription tbody tr",(function(){a(this).hasClass("active_databales")?(a(this).removeClass("active_databales"),o=null):(a("#datatables_gestion_inscription tbody tr").removeClass("active_databales"),a(this).addClass("active_databales"),o=a(this).attr("id"),n())}));var r=function(){var e=s(regeneratorRuntime.mark((function e(){var n,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,axios.get("/inscription/gestion/frais/"+o);case 3:return n=e.sent,e.next=6,n.data;case 6:t=e.sent,1,a("#frais").html(t.list).select2(),a("#code-facture").html(t.codefacture),e.next=19;break;case 12:return e.prev=12,e.t0=e.catch(0),e.t0.response.data,!1,i.fire({icon:"error",title:"Facture Introuvable!"}),e.abrupt("return");case 19:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),d=function(){var e=s(regeneratorRuntime.mark((function e(){var n,t,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,(n=a("#frais-modal i")).removeClass("fa-money-bill-alt").addClass("fa-spinner fa-spin"),e.next=5,axios.get("/inscription/gestion/info/"+o);case 5:return t=e.sent,e.next=8,t.data;case 8:r=e.sent,a(".etudiant_info").html(r),n.addClass("fa-money-bill-alt").removeClass("fa-spinner fa-spin"),a("#frais_inscription-modal").modal("show"),e.next=20;break;case 14:e.prev=14,e.t0=e.catch(0),e.t0.response.data,console.log(e.t0,e.t0.response),i.fire({icon:"error",title:"Some Error"}),icon.addClass("fa-money-bill-alt").removeClass("fa-spinner fa-spin");case 20:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(){return e.apply(this,arguments)}}();a("#frais-modal").on("click",(function(){o?(r(),d()):i.fire({icon:"error",title:"Veuillez selection une ligne!"})})),a("input[type=radio][name=organ]").on("change",function(){var e=s(regeneratorRuntime.mark((function e(n){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),0!=this.value){e.next=10;break}return e.next=4,axios.get("/api/getorganismepasPayant");case 4:t=e.sent,response=t.data,a(".select-organ #org").html(response).select2(),a(".select-organ").css("display","block"),e.next=12;break;case 10:a(".select-organ #org").html(""),a(".select-organ").css("display","none");case 12:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}()),a("#add_frais_gestion").on("click",(function(){var e=a("#frais").find(":selected").val();if(""!=e){var n=a("#frais").find(":selected").text(),t=a("#montant").val(),r=a("#ice").val(),s=a(".select-organ #org").find(":selected").text(),i=a(".select-organ #org").val();if(!a.isNumeric(e)||""==t)return;if(1==a("input[name='organ']:checked").val())i=7,s="Payant";else if(""==i)return;l.push({index:Math.floor(1e3*Math.random()+1),id:e,designation:n,montant:t,ice:r,organisme_id:i,organisme:s}),u()}})),a("body").on("click",".delete_frais",(function(){var e=this,n=l.findIndex((function(n){return n.index==a(e).attr("id")}));l.splice(n,1),u()}));var u=function(){var e="";l.map((function(n,t){e+="\n            <tr>\n                <td>".concat(t+1,"</td>\n                <td>").concat(n.designation,"</td>\n                <td>").concat(n.montant,"</td>\n                <td>").concat(n.ice,"</td>\n                <td>").concat(n.organisme,"</td>\n                <td><button class='delete_frais btn btn-danger'  id='").concat(n.index,"'><i class='fa fa-trash' ></i></button></td>\n            </tr>\n        ")})),a(".table_frais_inscription").html(e)};a("#save_frais_gestion").on("click",s(regeneratorRuntime.mark((function n(){var t,r,s,i,c,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return(t=new FormData).append("frais",JSON.stringify(l)),(r=a("#frais_inscription-modal .modal-body .alert")).remove(),(s=a("#save_frais_gestion i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),n.prev=6,n.next=9,axios.post("/inscription/gestion/addfrais/"+o,t);case 9:i=n.sent,c=i.data,a("#frais_inscription-modal .modal-body").prepend('<div class="alert alert-success">\n                <p>Bien Enregistre</p>\n              </div>'),s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin "),a(".table_frais_inscription").empty(),l=[],window.open("/inscription/gestion/facture/"+c,"_blank"),e.ajax.reload(null,!1),n.next=26;break;case 19:n.prev=19,n.t0=n.catch(6),d=n.t0.response.data,console.log(n.t0,n.t0.response),r.remove(),a("#frais_inscription-modal .modal-body").prepend('<div class="alert alert-danger">'.concat(d,"</div>")),s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 26:setTimeout((function(){a("#frais_inscription-modal .modal-body .alert").remove()}),3e3);case 27:case"end":return n.stop()}}),n,null,[[6,19]])})))),a("#statut-modal").on("click",(function(){o?(a("#statut_modal .modal-body .alert").remove(),a("#statut_modal").modal("show")):i.fire({icon:"error",title:"Veuillez selection une ligne!"})})),a("#statut_save").on("submit",function(){var n=s(regeneratorRuntime.mark((function n(t){var r,s,i,c,l,d;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t.preventDefault(),r=new FormData(a(this)[0]),(s=a("#statut_modal .modal-body .alert")).remove(),(i=a("#statut_save .btn i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),n.prev=6,n.next=9,axios.post("/inscription/gestion/updatestatut/"+o,r);case 9:c=n.sent,l=c.data,a("#statut_modal .modal-body").prepend('<div class="alert alert-success">\n                <p>'.concat(l,"</p>\n              </div>")),i.addClass("fa-check-circle").removeClass("fa-spinner fa-spin "),a("#annee_inscription, #promotion_inscription").empty(),e.ajax.reload(null,!1),n.next=24;break;case 17:n.prev=17,n.t0=n.catch(6),d=n.t0.response.data,console.log(n.t0,n.t0.response),s.remove(),a("#statut_modal .modal-body").prepend('<div class="alert alert-danger">'.concat(d,"</div>")),i.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 24:case"end":return n.stop()}}),n,this,[[6,17]])})));return function(e){return n.apply(this,arguments)}}()),a("body").on("click","#extraction",(function(){window.open("/inscription/gestion/extraction_ins","_blank")})),a("body").on("click","#extraction_annee",(function(e){e.preventDefault(),a("#annee_extraction_inscription").modal("show")})),a("body").on("click","#export_inscription",(function(e){e.preventDefault();var n=a("#annee_export").val();window.open("/inscription/gestion/extraction_ins_annee/"+n,"_blank")}))}))}},e=>{e.O(0,[9755,8029,3433],(()=>{return n=9611,e(e.s=n);var n}));e.O()}]);