(self.webpackChunk=self.webpackChunk||[]).push([[2024],{7085:(e,a,r)=>{var n=r(9755);function t(e,a,r,n,t,s,o){try{var i=e[s](o),c=i.value}catch(e){return void r(e)}i.done?a(c):Promise.resolve(c).then(n,t)}function s(e){return function(){var a=this,r=arguments;return new Promise((function(n,s){var o=e.apply(a,r);function i(e){t(o,n,s,i,c,"next",e)}function c(e){t(o,n,s,i,c,"throw",e)}i(void 0)}))}}r(3076),r(9826),r(1539),r(4916),r(4765),r(8674);var o=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}});n(document).ready((function(){var e,a=n("#datatables_gestion_programmation").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/parametre/programmation/list",processing:!0,serverSide:!0,deferRender:!0,language:datatablesFrench});n("select").select2(),n("body").on("click","#datatables_gestion_programmation tbody tr",(function(){n(this).hasClass("active_databales")?(n(this).removeClass("active_databales"),e=null):(n("#datatables_gestion_programmation tbody tr").removeClass("active_databales"),n(this).addClass("active_databales"),e=n(this).attr("id"))})),n("#etablissement").on("change",s(regeneratorRuntime.mark((function e(){var r,t,s;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(this).val(),n(".card-header").find("#a-ouverte").text(""),t="",""==r){e.next=12;break}return e.next=6,axios.get("/api/formation/"+r);case 6:s=e.sent,t=s.data,a.columns().search("").draw(),a.columns(0).search(r).draw(),e.next=13;break;case 12:a.columns(0).search("").draw();case 13:n("#formation").html(t).select2(),n("#promotion").html("").select2(),n("#annee").html("").select2(),n("#semestre").html("").select2(),n("#module").html("").select2(),n("#element").html("").select2();case 19:case"end":return e.stop()}}),e,this)})))),n("#formation").on("change",s(regeneratorRuntime.mark((function e(){var r,t,s,o,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(this).val(),t="",n(".card-header").find("#a-ouverte").text(""),""==r){e.next=20;break}return a.columns().search("").draw(),a.columns(1).search(r).draw(),e.next=8,axios.get("/api/anneeProgrammation/"+r);case 8:return s=e.sent,response_annee=s.data,e.next=12,axios.get("/api/promotion/"+r);case 12:return o=e.sent,t=o.data,e.next=16,axios.get("/api/formationAndanneeOuverte/"+r);case 16:i=e.sent,n(".card-header").find("#a-ouverte").text("L'Annee Ouverte: "+i.data.annee),e.next=21;break;case 20:a.columns(1).search("").draw();case 21:n("#promotion").html(t).select2(),n("#annee").html(response_annee).select2(),n("#semestre").html("").select2(),n("#module").html("").select2(),n("#element").html("").select2();case 26:case"end":return e.stop()}}),e,this)})))),n("#promotion").on("change",s(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(r=n(this).val())){e.next=9;break}return a.columns(2).search(r).draw(),e.next=5,axios.get("/api/semestre/"+r);case 5:t=e.sent,response=t.data,e.next=10;break;case 9:a.columns(2).search("").draw();case 10:n("#semestre").html(response).select2(),n("#module").html("").select2(),n("#element").html("").select2();case 13:case"end":return e.stop()}}),e,this)})))),n("#semestre").on("change",s(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(r=n(this).val())){e.next=9;break}return a.columns(3).search(r).draw(),e.next=5,axios.get("/api/module/"+r);case 5:t=e.sent,response=t.data,e.next=10;break;case 9:a.columns(3).search("").draw();case 10:n("#module").html(response).select2(),n("#element").html("").select2();case 12:case"end":return e.stop()}}),e,this)})))),n("#module").on("change",s(regeneratorRuntime.mark((function e(){var r,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(r=n(this).val())){e.next=9;break}return a.columns(4).search(r).draw(),e.next=5,axios.get("/api/element/"+r);case 5:t=e.sent,response=t.data,e.next=10;break;case 9:a.columns(4).search("").draw();case 10:a.columns(5).search("").draw(),n("#element").html(response).select2();case 12:case"end":return e.stop()}}),e,this)})))),n("#element").on("change",s(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!=(r=n(this).val())?a.columns(5).search(r).draw():a.columns(5).search("").draw();case 2:case"end":return e.stop()}}),e,this)})))),n("#annee").on("change",s(regeneratorRuntime.mark((function e(){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:""!=(r=n(this).val())?a.columns(6).search(r).draw():a.columns(6).search("").draw();case 2:case"end":return e.stop()}}),e,this)})))),n("#ajouter").on("click",(function(){n("#element").val()&&""!=n("#element").val()&&n("#annee").val()&&""!=n("#annee").val()?(n("select").select2(),n("#ajout_modal").modal("show")):o.fire({icon:"error",title:"Veuillez choissir une annee et un element!"})})),n("#save").on("submit",function(){var r=s(regeneratorRuntime.mark((function r(t){var s,i,c,l,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),(s=new FormData(n("#save")[0])).append("element_id",n("#element").val()),s.append("annee_id",n("#annee").val()),i=n("#save i"),r.prev=5,i.remove("fa-check-circle").addClass("fa-spinner fa-spin "),r.next=9,axios.post("/parametre/programmation/new",s);case 9:c=r.sent,l=c.data,i.addClass("fa-check-circle").removeClass("fa-spinner fa-spin "),n("#save")[0].reset(),a.ajax.reload(),e=!1,n("#ajout_modal").modal("hide"),o.fire({icon:"success",title:l}),r.next=25;break;case 19:r.prev=19,r.t0=r.catch(5),console.log(r.t0,r.t0.response),u=r.t0.response.data,o.fire({icon:"error",title:u}),i.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 25:case"end":return r.stop()}}),r,null,[[5,19]])})));return function(e){return r.apply(this,arguments)}}()),n("#modifier").on("click",s(regeneratorRuntime.mark((function a(){var r,t,s,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(e){a.next=3;break}return o.fire({icon:"error",title:"Veuillez selectionner une ligne!"}),a.abrupt("return");case 3:return(r=n("#modifier i")).remove("fa-edit").addClass("fa-spinner fa-spin "),a.prev=5,a.next=8,axios.get("/parametre/programmation/details/"+e);case 8:t=a.sent,s=t.data,r.addClass("fa-edit").removeClass("fa-spinner fa-spin "),n("body #modifier_modal #udpate").html(s),n("select").select2(),n("#modifier_modal").modal("show"),a.next=22;break;case 16:a.prev=16,a.t0=a.catch(5),console.log(a.t0,a.t0.response),i=a.t0.response.data,o.fire({icon:"error",title:i}),r.addClass("fa-edit").removeClass("fa-spinner fa-spin ");case 22:case"end":return a.stop()}}),a,null,[[5,16]])})))),n("#udpate").on("submit",function(){var r=s(regeneratorRuntime.mark((function r(t){var s,i,c,l,u;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.preventDefault(),(s=new FormData(n("#udpate")[0])).append("annee_id",n("#annee").val()),s.append("element_id",n("#element").val()),i=n("#udpate i"),r.prev=5,i.remove("fa-check-circle").addClass("fa-spinner fa-spin "),r.next=9,axios.post("/parametre/programmation/update/"+e,s);case 9:c=r.sent,l=c.data,n("#udpate")[0].reset(),i.addClass("fa-check-circle").removeClass("fa-spinner fa-spin "),a.ajax.reload(),e=!1,n("#modifier_modal").modal("hide"),o.fire({icon:"success",title:l}),r.next=25;break;case 19:r.prev=19,r.t0=r.catch(5),console.log(r.t0,r.t0.response),u=r.t0.response.data,o.fire({icon:"error",title:u}),i.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 25:case"end":return r.stop()}}),r,null,[[5,19]])})));return function(e){return r.apply(this,arguments)}}()),n("#supprimer").on("click",s(regeneratorRuntime.mark((function r(){var t,s,i,c;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(e){r.next=3;break}return o.fire({icon:"error",title:"Veuillez selectioner un enseignant!"}),r.abrupt("return");case 3:if((t=n("#supprimer i")).removeClass("fa-trash").addClass("fa-spinner fa-spin "),(s=new FormData).append("programmation",e),1!=confirm("Vous voulez vraiment supprimer cette programmation ?")){r.next=27;break}return r.prev=9,r.next=12,axios.post("/parametre/programmation/delete",s);case 12:i=r.sent,i.data,e=null,a.ajax.reload(),e=null,t.addClass("fa-trash").removeClass("fa-spinner fa-spin "),o.fire({icon:"success",title:"programmation bien Supprimer"}),r.next=27;break;case 21:r.prev=21,r.t0=r.catch(9),console.log(r.t0,r.t0.response),c=r.t0.response.data,o.fire({icon:"error",title:c}),t.addClass("fa-trash").removeClass("fa-spinner fa-spin ");case 27:case"end":return r.stop()}}),r,null,[[9,21]])})))),n("#duplication").on("click",s(regeneratorRuntime.mark((function e(){var r,t,s,i,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!=n("#annee").val()){e.next=3;break}return o.fire({icon:"error",title:"Veuillez selectioner une formation et une annee!"}),e.abrupt("return");case 3:if((r=n("#duplication i")).removeClass("fa-clone").addClass("fa-spinner fa-spin "),(t=new FormData).append("promotion",n("#promotion").val()),t.append("annee",n("#annee").val()),1!=confirm("Vous voulez vraiment dupliquer les programmations ? Si oui, merci de verifier d'abord l'annee ouverte pour cette formation")){e.next=26;break}return e.prev=10,e.next=13,axios.post("/parametre/programmation/duplication",t);case 13:s=e.sent,i=s.data,a.ajax.reload(),r.addClass("fa-clone").removeClass("fa-spinner fa-spin "),o.fire({icon:"success",title:i}),e.next=26;break;case 20:e.prev=20,e.t0=e.catch(10),console.log(e.t0,e.t0.response),c=e.t0.response.data,o.fire({icon:"error",title:c}),r.addClass("fa-clone").removeClass("fa-spinner fa-spin ");case 26:case"end":return e.stop()}}),e,null,[[10,20]])}))))}))}},e=>{e.O(0,[9755,8029,1069],(()=>{return a=7085,e(e.s=a);var a}));e.O()}]);