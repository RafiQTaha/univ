(self.webpackChunk=self.webpackChunk||[]).push([[345],{3967:(e,a,t)=>{var r=t(9755);function n(e,a,t,r,n,s,i){try{var o=e[s](i),l=o.value}catch(e){return void t(e)}o.done?a(l):Promise.resolve(l).then(r,n)}function s(e){return function(){var a=this,t=arguments;return new Promise((function(r,s){var i=e.apply(a,t);function o(e){n(i,r,s,o,l,"next",e)}function l(e){n(i,r,s,o,l,"throw",e)}o(void 0)}))}}t(3076),t(9554),t(1539),t(4747),t(9826),t(2772),t(561),t(1249),t(2564),t(8674);var i=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:3e3,timerProgressBar:!0,didOpen:function(e){e.addEventListener("mouseenter",Swal.stopTimer),e.addEventListener("mouseleave",Swal.resumeTimer)}}),o=0,l=null,c=[],d=[];r(document).ready((function(){var e=r("#list_epreuve_normal").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/administration/epreuve/list/normal",processing:!0,serverSide:!0,deferRender:!0,drawCallback:function(){c.forEach((function(e){r("body tr#"+e).find("input").prop("checked",!0)})),r("body tr#"+l).addClass("active_databales")},language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"}}),a=r("#list_epreuve_rattrapage").DataTable({lengthMenu:[[10,15,25,50,100,2e13],[10,15,25,50,100,"All"]],order:[[0,"desc"]],ajax:"/administration/epreuve/list/rattrapage",processing:!0,serverSide:!0,deferRender:!0,drawCallback:function(){c.forEach((function(e){r("body tr#"+e).find("input").prop("checked",!0)})),r("body tr#"+l).addClass("active_databales")},language:{url:"//cdn.datatables.net/plug-ins/9dcbecd42ad/i18n/French.json"}});r("body").on("click","#list_epreuve_normal tbody tr",(function(){var e=r(this).find("input");if(e.is(":checked")){e.prop("checked",!1);var a=c.indexOf(e.attr("id"));c.splice(a,1)}else e.prop("checked",!0),c.push(e.attr("id"))})),r("body").on("click","#list_epreuve_rattrapage tbody tr",(function(){var e=r(this).find("input");if(e.is(":checked")){e.prop("checked",!1);var a=c.indexOf(e.attr("id"));c.splice(a,1)}else e.prop("checked",!0),c.push(e.attr("id"))})),r("body").on("dblclick","#list_epreuve_normal tbody tr",(function(){r(this).hasClass("active_databales")?(r(this).removeClass("active_databales"),r("#inscription-modal").attr("disabled",!0),l=null):(r("#list_epreuve_normal tbody tr").removeClass("active_databales"),r("#list_epreuve_rattrapage tbody tr").removeClass("active_databales"),r(this).addClass("active_databales"),l=r(this).attr("id"))})),r("body").on("dblclick","#list_epreuve_rattrapage tbody tr",(function(){r(this).hasClass("active_databales")?(r(this).removeClass("active_databales"),r("#inscription-modal").attr("disabled",!0),l=null):(r("#list_epreuve_normal tbody tr").removeClass("active_databales"),r("#list_epreuve_rattrapage tbody tr").removeClass("active_databales"),r(this).addClass("active_databales"),l=r(this).attr("id"))})),r(".nav-pills a").on("click",(function(e){r(this).tab("show"),l=null,c=[],r("#list_epreuve_normal tbody tr").removeClass("active_databales"),r("#list_epreuve_rattrapage tbody tr").removeClass("active_databales"),r("input").prop("checked",!1),o="Session normal"==r(this).html()?0:1})),r("#import_epreuve").on("click",(function(){r("#import_en_masse").modal("show"),r("#import_en_masse .modal-body .alert").remove()})),r("#epreuve_canvas").on("click",(function(){window.open("/administration/epreuve/canvas","_blank")})),r("#import_epreuve_save").on("submit",function(){var t=s(regeneratorRuntime.mark((function t(n){var s,i,o,l,c,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),s=new FormData(r(this)[0]),(i=r("#import_en_masse .modal-body .alert")).remove(),(o=r("#epreuve_enregistre i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),t.prev=6,t.next=9,axios.post("/administration/epreuve/import",s);case 9:l=t.sent,c=l.data,r("#import_en_masse .modal-body").prepend('<div class="alert alert-success">\n                <p>'.concat(c.message,"</p>\n              </div>")),window.open("/"+c.file,"_blank"),o.addClass("fa-check-circle").removeClass("fa-spinner fa-spin "),e.ajax.reload(null,!1),a.ajax.reload(null,!1),t.next=25;break;case 18:t.prev=18,t.t0=t.catch(6),d=t.t0.response.data,console.log(t.t0,t.t0.response),i.remove(),r("#import_en_masse .modal-body").prepend('<div class="alert alert-danger">'.concat(d,"</div>")),o.addClass("fa-check-circle").removeClass("fa-spinner fa-spin ");case 25:case"end":return t.stop()}}),t,this,[[6,18]])})));return function(e){return t.apply(this,arguments)}}()),r("#affilier_etudiant").on("click",function(){var t=s(regeneratorRuntime.mark((function t(n){var s,d,u,p,m,v,f,h,_;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),0!==o){t.next=29;break}if(0!=c.length){t.next=5;break}return i.fire({icon:"error",title:"Veuillez cochez une ou plusieurs ligne!"}),t.abrupt("return");case 5:return(s=r("#affilier_etudiant i")).removeClass("fa-link").addClass("fa-spinner fa-spin"),t.prev=7,(d=new FormData).append("epreuves",JSON.stringify(c)),t.next=12,axios.post("/administration/epreuve/affiliation_normale",d);case 12:u=t.sent,p=u.data,s.addClass("fa-link").removeClass("fa-spinner fa-spin "),p.total>0?window.open("/"+p.zipname,"_blank"):i.fire({icon:"info",title:"Epreuves d√©ja affilier ou valider"}),e.ajax.reload(null,!1),a.ajax.reload(null,!1),c=[],t.next=27;break;case 21:t.prev=21,t.t0=t.catch(7),console.log(t.t0),m=t.t0.response.data,i.fire({icon:"error",title:m}),s.addClass("fa-link").removeClass("fa-spinner fa-spin ");case 27:t.next=52;break;case 29:if(l){t.next=32;break}return i.fire({icon:"error",title:"Veuillez selection une ligne!"}),t.abrupt("return");case 32:return(v=r("#affilier_etudiant i")).removeClass("fa-link").addClass("fa-spinner fa-spin"),t.prev=34,t.next=37,axios.get("/administration/epreuve/etudiants/"+l);case 37:f=t.sent,h=f.data,v.addClass("fa-link").removeClass("fa-spinner fa-spin "),r(".list_etudiants").html(h),r(".check_all_etudiant").prop("checked",!1),r("#affilier_list_etudiant").modal("show"),r("#affilier_list_etudiant .modal-body .alert").remove(),t.next=52;break;case 46:t.prev=46,t.t1=t.catch(34),console.log(t.t1),_=t.t1.response.data,i.fire({icon:"error",title:_}),v.addClass("fa-link").removeClass("fa-spinner fa-spin ");case 52:case"end":return t.stop()}}),t,null,[[7,21],[34,46]])})));return function(e){return t.apply(this,arguments)}}()),r("body").on("click",".check_etudiant",(function(){var e=d.indexOf(r(this).val());-1!=e?d.splice(e,1):d.push(r(this).val()),console.log(d)})),r("body").on("click",".check_all_etudiant",(function(){d=[];var e=r(".check_etudiant");1==r(".check_all_etudiant").prop("checked")?(e.prop("checked",!0),e.map((function(){d.push(this.value)}))):e.prop("checked",!1),console.log(d)})),r("#save_list_etudiant").on("click",function(){var t=s(regeneratorRuntime.mark((function t(n){var s,i,o,c,u,p;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),(s=r("#save_list_etudiant i")).removeClass("fa-check-circle").addClass("fa-spinner fa-spin"),(i=r("#affilier_list_etudiant .modal-body .alert")).remove(),(o=new FormData).append("idInscriptions",JSON.stringify(d)),o.append("idEpreuve",l),t.prev=8,t.next=11,axios.post("/administration/epreuve/affiliation_rattrapage",o);case 11:c=t.sent,u=c.data,s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin"),r("#affilier_list_etudiant .modal-body").prepend('<div class="alert alert-success">\n                    <p>'.concat(u,"</p>\n                  </div>")),r(".list_etudiants").empty(),a.ajax.reload(null,!1),e.ajax.reload(null,!1),t.next=27;break;case 20:t.prev=20,t.t0=t.catch(8),console.log(t.t0),p=t.t0.response.data,i.remove(),r("#affilier_list_etudiant .modal-body").prepend('<div class="alert alert-danger">'.concat(p,"</div>")),s.addClass("fa-check-circle").removeClass("fa-spinner fa-spin");case 27:case"end":return t.stop()}}),t,null,[[8,20]])})));return function(e){return t.apply(this,arguments)}}()),r("select").select2(),r("#etablissement").on("change",s(regeneratorRuntime.mark((function e(){var a,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r(this).val(),t="",""==a){e.next=7;break}return e.next=5,axios.get("/api/formation/"+a);case 5:n=e.sent,t=n.data;case 7:r("#element").html("").select2(),r("#module").html("").select2(),r("#semestre").html("").select2(),r("#promotion").html("").select2(),r("#formation").html(t).select2();case 12:case"end":return e.stop()}}),e,this)})))),r("#formation").on("change",s(regeneratorRuntime.mark((function e(){var a,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=r(this).val(),t="",""==a){e.next=7;break}return e.next=5,axios.get("/api/promotion/"+a);case 5:n=e.sent,t=n.data;case 7:r("#element").html("").select2(),r("#module").html("").select2(),r("#semestre").html("").select2(),r("#promotion").html(t).select2();case 11:case"end":return e.stop()}}),e,this)})))),r("#promotion").on("change",s(regeneratorRuntime.mark((function e(){var a,t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(a=r(this).val())){e.next=10;break}return e.next=4,axios.get("/api/semestre/"+a);case 4:return t=e.sent,response=t.data,e.next=8,axios.get("/api/niv1/"+a);case 8:n=e.sent,niv1=n.data;case 10:r("#element").html("").select2(),r("#module").html("").select2(),r("#semestre").html(response).select2();case 13:case"end":return e.stop()}}),e,this)})))),r("#semestre").on("change",s(regeneratorRuntime.mark((function e(){var a,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(a=r(this).val())){e.next=6;break}return e.next=4,axios.get("/api/module/"+a);case 4:t=e.sent,response=t.data;case 6:r("#element").html("").select2(),r("#module").html(response).select2();case 8:case"end":return e.stop()}}),e,this)})))),r("#module").on("change",s(regeneratorRuntime.mark((function e(){var a,t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""==(a=r(this).val())){e.next=6;break}return e.next=4,axios.get("/api/element/"+a);case 4:t=e.sent,response=t.data;case 6:r("#element").html(response).select2();case 7:case"end":return e.stop()}}),e,this)})))),r("#ajouter_epreuve").on("click",(function(e){e.preventDefault(),r("#ajouter_epreuve-modal").modal("show")})),r("body").on("submit","#add_epreuve",function(){var a=s(regeneratorRuntime.mark((function a(t){var n,s,i,o,l,c;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t.preventDefault(),n=new FormData(r("#add_epreuve")[0]),(s=r("#ajouter_epreuve-modal .modal-body .alert")).remove(),(i=r("#ajouter_epreuve-modal button i")).removeClass("fa-check").addClass("fa-spinner fa-spin"),a.prev=6,a.next=9,axios.post("/administration/epreuve/add_epreuve",n);case 9:o=a.sent,l=o.data,r("#ajouter_epreuve-modal .modal-body").prepend('<div class="alert alert-success" style="width: 98%;margin: 0 auto;">\n                  <p>'.concat(l,"</p>\n                </div>")),i.addClass("fa-check").removeClass("fa-spinner fa-spin "),e.ajax.reload(null,!1),a.next=22;break;case 16:a.prev=16,a.t0=a.catch(6),c=a.t0.response.data,s.remove(),r("#ajouter_epreuve-modal .modal-body").prepend('<div class="alert alert-danger" style="width: 98%;margin: 0 auto;">'.concat(c,"</div>")),i.addClass("fa-check").removeClass("fa-spinner fa-spin ");case 22:setTimeout((function(){r(".modal-body .alert").remove()}),2500);case 23:case"end":return a.stop()}}),a,null,[[6,16]])})));return function(e){return a.apply(this,arguments)}}())}))}},e=>{e.O(0,[755,29,523],(()=>{return a=3967,e(e.s=a);var a}));e.O()}]);